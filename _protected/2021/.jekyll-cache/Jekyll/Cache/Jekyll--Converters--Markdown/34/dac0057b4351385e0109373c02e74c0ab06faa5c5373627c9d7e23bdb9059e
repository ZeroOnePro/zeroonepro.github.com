I"<p>노드는 기본적으로 싱글 스레드, 논 블로킹 모델을 사용한다.(js의 특성이기도 하다)</p>

<p>노드 서버 또한 동일한 모델일 수 밖에 없다. 따라서 노드 서버의 장단점은 싱글 스레드, 논 블로킹 모델의 장단점과 크게 다르지 않다.</p>

<p>서버에는 기본적으로 I / O 요청이 많이 발생하므로, I / O 처리를 잘하는 노드를 서버로 사용하면 좋다.</p>

<p>노드는 논 블로킹 방식으로 코드를 잘 작성하면 libuv 라이브러리를 사용하여 IO 작업을 논 블로킹 방식으로 처리한다. 따라서 스레드 하나가 수 많은 I/O를 혼자서 감당할 수 있다.</p>

<p>하지만, CPU 부하가 높은 작업에는 적절하지 않은데 이유는 싱글 스레드이기 때문이다. 작성한 코드는 모두 스레드 하나가 처리하기 때문에 이 부하가 높은 작업이 논 블로킹이 될 수 없다면, 대기 시간이 길어지게 된다.</p>

<p>이와 같은 특성을 활용하려면 노드를 어디에 사용해야 좋을까?</p>

<p>네트워크나 데이터베이스, 디스크 작업 같은 IO에 특화 되어 있기 때문에 개수는 많지만 크기는 작은(크면 CPU 부하 높음) 데이터를 실시간으로 주고받는데 적합하다. 이를 테면, 실시간 채팅, 주식 차트, json 데이터를 제공하는 API 서버가 노드를 많이 사용한다.</p>

<p>노드 12 버전에서 worker thread의 기능 안정화롤 멀티 스레드 작업을 할 수 있게 되었지만, 멀티 스레드 프로그래밍의 난이도는 높으며, C / C++, Rust, Go와 같은 언어에 비해 속도가 많이 느리다.</p>

<p>멀티 스레드 기능이 있다고 하더라도 이미지나 비디오 처리, 혹은 대규모 데이터 처리처럼 CPU를 많이 사용하는 작업에는 권장 되지 않는다. 노드보다 더 적합한 다른 프레임워크가 많다. 이럼에도 굳이 이런 환경에서 노드를 쓰고자 하면, AWS 람다나 구글 클라우드 functions같은 서비스에서 CPU 부하가 높은 작업을 처리한 것을 지원하는 방향을 고려해야 한다. 싱글 스레드 프로그래밍은 멀티 스레드 방식보다 상대적으로 쉬우므로 서버 프로그래밍에 익숙치 않은 사람도 쉽게 입문할 수 있다는 장점이 있다. 다만 싱글 스레드 방식으로 서버를 운영할 때는 하나 뿐인 스레드가 에러로 멈추지 않도록 잘 관리해야 한다. 에러를 제대로 처리하지 못하면 하나뿐인 스레드가 죽어 서버 전체가 멈추기 때문이다.</p>

<p>노드에는 웹 서버가 내장되어 있어 Apache, Nginx 같은 WAS를 따로 integration할 필요는 없으나,  서비스 규모가 커지면 Nginx 등의 웹 서버를 노드 서버와 integration해야 한다.</p>

<p>노드는 Go처럼 비동기에 강점을 보이는 언어이지만 nginx처럼 정적 파일 제공, 로드 밸런싱에 특화된 웹 서버에 비해서는 속도가 느리다. 그렇긴 해도 극단적인 성능향상이 필요없는 경우에는 굳이 선택하지 않을 이유는 없다.</p>

<p><img src="/assets/images/node.js/1.2.1.png" alt="1.2.1" /></p>

<p>자바스크립트를 사용함으로써 얻을 수 있는 장점도 있다.</p>

<p>요즘은 XML대신 JSON을 사용해서 데이터를 주고 받는데, JSON이 자바스크립트 형식이므로 노드에서는 쉽게 처리할 수 있다.</p>

<p>웹 사이트 중에는 쇼핑몰, 블로그와 같은 정적인 컨텐츠를 많이 제공하는 사이트가 많은데, 이들에게 노드가 서버로써 적합할까?</p>

<p>이런 사이트들은 정적인 컨텐츠(변하지 않는 html, css, js 등)를 많이 제공한다. 기본적인 틀이 있고, 그 안의 내용물(텍스트, 이미지)만 조금씩 달라진다. 노드가 다른 서버 프레임워크에 비해 이러한 컨텐츠를 제공하는데 뚜렷한 장점을 가지지는 않지만, 그렇다고 적합하지 않다고 할 수 없다. Nunjucks, Pug, EJS 같은 템플릿 엔진을</p>

<p>안전성과 보안성 측면의 문제도 이미 충분히 검증되었다.</p>

<p>NASA, AirBnB, Uber, Netflix, linkedIn, Paypal, ebay 와 같이 결제 시스템을 사용하는 대기업들도 서비스를 노드로 운영한다.</p>

<p><strong>(Node.js 교과서 개정 2판 - 길벗, 2021)을 학습하고 개인 학습용으로 정리한 내용입니다.</strong></p>
:ET